<%- layout('layouts/main')  %> 


<div class="row">
  <h1 class="display-4 text-center">Ingresar Empleado</h1>
</div>

<%- include('navTabs') %> 

<!-- Ingresar Empleado -->
<form action="<%=urlForm%>" method="POST">
<div class="container">

  <div class="row">
    <div class="col-md-6 mb-4">
      <div class="form-outline">
        <label class="form-label" for="numCod">Código</label>
        <input type="number" name="codEmpleado" id="numCod" class="form-control" />
      </div>
    </div>

  <div class="row">
    <div class="col-md-6 mb-4">
      <div class="form-outline">
        <label class="form-label" for="txtNombres">Nombres</label>
        <input type="text" name="nombres" id="txtNombres" class="form-control" />
      </div>
    </div>
    <div class="col-md-6 mb-4">
      <div class="form-outline">
        <label class="form-label" for="txtApellidos">Apellidos</label>
        <input type="text" name="apellidos" id="txtApellidos" class="form-control" />
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-6 col-lg-4 mb-4">
      <div class="form-outline">
        <label class="form-label" for="txtRut">Rut</label>
        <input type="text" pattern="\d{1,2}.\d{3}.\d{3}-[\d|kK]{1}" title="Rut inválido" 
        name="rut" id="txtRut" class="form-control" onkeyup="formatRut(this);" required/>
      </div>
    </div>
    <div class="col-md-6 col-lg-4 mb-4">
      <div class="form-outline mb-4">
        <label class="form-label" for="txtTel">Teléfono</label>
        <input type="tel" pattern="^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\s\./0-9]*$" 
        title="Ingrese un teléfono válido" name="tel" id="txtTel" class="form-control" />
      </div>
    </div>
    <div class="col-md-12 col-lg-4 mb-4">
      <div class="form-outline mb-4">
        <label class="form-label" for="txtDir">Dirección</label>
        <input type="text" name="dir" id="txtDir" class="form-control" />
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12 col-lg-4 mb-4">
      <div class="form-outline mb-4">
        <label class="form-label" for="emlEmail">Email</label>
        <input type="email" pattern="[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?"
        title="Ingrese un email válido" name="email" id="emlEmail" class="form-control" required/>
      </div>
    </div>
    <div class="col-md-6 col-lg-4 mb-4">
      <div class="form-outline mb-4">
        <label class="form-label" for="passPsw">Contraseña</label>
        <input type="password" name="psw" id="passPsw" class="form-control" />
      </div>
    </div>
    <div class="col-md-6 col-lg-4 mb-4">
      <div class="form-outline mb-4">
        <label class="form-label" for="passPsw">Confirme contraseña</label>
        <input type="password" name="pswCheck" id="passPswCheck" class="form-control" />
      </div>
    </div>
  </div>

  
  <div class="row">
    <!-- Tipo empleado -->
    <div class="col-md-6 mb-4">
      <div class="form-check d-flex align-items-center mb-4">
        <label class="form-label" for="cboTipo">Tipo de personal</label>
        <select name="tipo" id="cboTipo" class="form-select">
          <option value="1" selected>Administrador</option>
        </select>
      </div>
    </div>

    <!-- Habilitado -->
    <div class="col-md-6 mb-4 d-flex align-items-center">
      <div class="form-check mb-4">
        <label class="form-check-label" for="checkboxEstado"> ¿Empleado habilitado? </label>
        <input class="form-check-input me-2" type="checkbox" value="1" id="checkboxEstado" checked />
      </div>
    </div>
      
  </div>
  
  <div class="form-group text-center">
    <button type="submit" class="btn btn-primary text-light mb-4">Agregar empleado</button>
  </div>

</div>
</form>

<script>
  function formatRut(cliente) {
      cliente.value = cliente.value.replace(/[^0-9kK]/g, '').replace( /^(\d{1,2})(\d{3})(\d{3})(\w{1})$/, '$1.$2.$3-$4');
      cliente.value = cliente.value.toLowerCase();
  }

  var clave = document.getElementById("passPsw")
  , confirm_clave = document.getElementById("passPswCheck");

  function validarClave(){
    if(clave.value != confirm_clave.value) {
      confirm_clave.setCustomValidity("Las contraseñas no coinciden");
    } else {
      confirm_clave.setCustomValidity('');
    }
  }

  clave.onchange = validarClave;
  confirm_clave.onkeyup = validarClave;
</script>